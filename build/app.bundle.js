!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=t((function e(t,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"handleToggleStartStop",(function(){return{state:a.model.stopGame()}})),n(this,"handleAdd",(function(){var e=a.model.addItem(),t=a.model.state;return{item:e,state:t,callback:function(){return a.model.updateOnMoveUp(e)}}})),n(this,"handleRemove",(function(){return{item:a.model.removeItem(),state:a.model.state}})),n(this,"handleUpdateCounter",(function(){return{counter:a.model.updateCounter()}})),this.model=t,this.view=i,this.view.bindToggleStartStop(this.handleToggleStartStop),this.view.bindAdd(this.handleAdd),this.view.bindRemove(this.handleRemove)})),a=i,r=JSON.parse('[{"id":"101","figure":"circle"},{"id":"102","figure":"rectangle"},{"id":"103","figure":"square"},{"id":"104","figure":"triangle"},{"id":"105","figure":"star"},{"id":"106","figure":"trapezoid"},{"id":"107","figure":"rhombus"},{"id":"108","figure":"pentagon"},{"id":"109","figure":"hexagon"},{"id":"110","figure":"ellipse"},{"id":"111","figure":"chat"},{"id":"112","figure":"close"},{"id":"113","figure":"frame"},{"id":"114","figure":"cross"}]');function o(e){for(var t,n=e.length;0!=n;){t=Math.floor(Math.random()*n),n--;var i=[e[t],e[n]];e[n]=i[0],e[t]=i[1]}return e}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={data:r,initialData:[],counter:0,favColors:["blue","green","yellow","purple","orange","red"],size:["small","medium","large"]}}var t,n;return t=e,(n=[{key:"_updateCounter",value:function(){return this.state.counter=this.state.initialData.length}},{key:"addItem",value:function(){var e,t,n=o((e=this.state.data,t=this.state.initialData,e.filter((function(e){return!t.find((function(t){return e.id===t.id}))})))).pop(),i=u(o(this.state.favColors)),a=u(o(this.state.size));return n.figure="".concat(n.figure," ").concat(o(i).pop()," ").concat(o(a).pop()),this.state.initialData=[].concat(u(this.state.initialData),[n]),this._updateCounter(),n}},{key:"removeItem",value:function(){var e,t=this.state.initialData.pop();return this.state.initialData=null===(e=this.state.initialData)||void 0===e?void 0:e.filter((function(e){return e.id!==(null==t?void 0:t.id)})),this._updateCounter(),t}},{key:"stopGame",value:function(){return this.state.counter=0,this.state.initialData=[],this.state}},{key:"updateOnMoveUp",value:function(e){var t;this.state.initialData=null===(t=this.state.initialData)||void 0===t?void 0:t.filter((function(t){return t.id!==(null==e?void 0:e.id)})),this._updateCounter()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s="data-game-counter-btn",f="disabled";function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(){var t,n,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameBox=document.querySelector("[".concat("data-game-box","]")),this.gameBoxScreenHolder=null===(t=this.gameBox)||void 0===t?void 0:t.querySelector("[".concat("data-game-screen-holder","]")),this.playBtns=null===(n=this.gameBox)||void 0===n?void 0:n.querySelectorAll("[".concat("data-game-controller-btn","]")),this.counterBtns=null===(i=this.gameBox)||void 0===i?void 0:i.querySelectorAll("[".concat("data-game-counter-btn","]")),this.counterDisplay=null===(a=this.gameBox)||void 0===a?void 0:a.querySelector("[".concat("data-game-counter-display","]"))}var t,n;return t=e,(n=[{key:"_disableCounter",value:function(){var e;null===(e=this.counterBtns)||void 0===e||e.forEach((function(e){return e.classList.add(f)}))}},{key:"_enableCounter",value:function(){var e;null===(e=this.counterBtns)||void 0===e||e.forEach((function(e){return e.classList.remove(f)}))}},{key:"_itemIncrement",value:function(e){var t=e(),n=t.item,i=t.state,a=t.callback;i.counter<i.data.length&&(this._addItem(n,i,a),this._updateCounter(i))}},{key:"_itemDecrement",value:function(e){var t=e(),n=t.item,i=t.state;n&&(this._removeItem(n,i),this._updateCounter(i))}},{key:"_addItem",value:function(e,t,n){this._moveShapeView(e,this._createImageView(e),t,n),this._updateCounter(t)}},{key:"_removeItem",value:function(e,t){this._itemRemoveFromDomView(e.id),this._updateCounter(t)}},{key:"_itemRemoveFromDomView",value:function(e){var t;null===(t=document.getElementById(e))||void 0===t||t.remove()}},{key:"_moveShapeView",value:function(e,t,n,i){var a=this,r=0,o=setInterval((function(){var e;r===(null===(e=a.gameBoxScreenHolder)||void 0===e?void 0:e.clientHeight)-t.offsetHeight?(clearInterval(o),t.remove(),i(),a._updateCounter(n)):(r++,t.style.bottom=r+"px")}),15)}},{key:"_createImageView",value:function(e){if(e){var t,n,i=e.figure,a=null==i?void 0:i.split(" "),r=document.createElement("div");return a&&((null==a?void 0:a.length)>1&&(null==a?void 0:a.length)<3?r.classList.add("figure","figure-".concat(a[0]),"".concat(a[1])):(null==a?void 0:a.length)>2?r.classList.add("figure","figure-".concat(a[0]),"".concat(a[1]),"".concat(a[2])):r.classList.add("figure","figure-".concat(a[0]))),r.setAttribute("id",e.id),r.style.left="".concat((0,80,Math.floor(81*Math.random())+0),"%"),null===(t=this.gameBoxScreenHolder)||void 0===t||t.appendChild(r),null===(n=document.getElementById("".concat(e.id)))||void 0===n||n.classList.add("out"),setTimeout((function(){var t;return null===(t=document.getElementById("".concat(e.id)))||void 0===t?void 0:t.classList.add("in")})),r}}},{key:"_updateCounter",value:function(e){this.counterDisplay&&(this.counterDisplay.innerHTML="Counts: ".concat(e.counter))}},{key:"bindToggleStartStop",value:function(e){var t,n=this;this._disableCounter(),null===(t=this.playBtns)||void 0===t||t.forEach((function(t){null==t||t.addEventListener("click",(function(){var i;if("START"===(null==t||null===(i=t.getAttribute("data-game-controller-btn"))||void 0===i?void 0:i.toUpperCase()))n._enableCounter();else{n.gameBoxScreenHolder.innerHTML="",n._disableCounter();var a=e().state;n._updateCounter(a)}}))}))}},{key:"bindAdd",value:function(e){var t,n=this;null===(t=this.counterBtns)||void 0===t||t.forEach((function(t){t.addEventListener("click",(function(){var i;return"INCREMENT"===(null==t||null===(i=t.getAttribute(s))||void 0===i?void 0:i.toUpperCase())&&n._itemIncrement(e)}))}))}},{key:"bindRemove",value:function(e){var t,n=this;null===(t=this.counterBtns)||void 0===t||t.forEach((function(t){t.addEventListener("click",(function(){var i;return"DECREMENT"===(null==t||null===(i=t.getAttribute(s))||void 0===i?void 0:i.toUpperCase())&&n._itemDecrement(e)}))}))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();new a(new d,new h)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUgsRUFBbURDLGVBR25ELEVBQUtDLHFCQUNBLENBQ0wsRUFBS3ZDLG9CQUFvQmtDLFVBQVksR0FDckMsRUFBS0Msa0JBQ0wsSUFBUWpGLEVBQVV3RCxJQUFWeEQsTUFDUixFQUFLd0MsZUFBZXhDLEVBQ3RCLENBQ0YsR0FDRixHQUNGLEdBQUMscUJBRUQsU0FBUXdELEdBQVMsYUFDQyxRQUFoQixFQUFBL0MsS0FBS3dDLG1CQUFXLE9BQWhCLEVBQWtCRSxTQUFRLFNBQUNDLEdBQ3pCQSxFQUFJOEIsaUJBQ0YsU0FDQSx1QkR0SUssZUN1SUg5QixTQUE4QyxRQUEzQyxFQUFIQSxFQUFLK0IsYUFBYXpDLFVBQTRCLFdBQTNDLEVBQUgsRUFBZ0QwQyxnQkFDcEIsRUFBS0UsZUFBZTlCLEVBQVEsR0FFOUQsR0FDRixHQUFDLHdCQUVELFNBQVdBLEdBQVMsYUFDRixRQUFoQixFQUFBL0MsS0FBS3dDLG1CQUFXLE9BQWhCLEVBQWtCRSxTQUFRLFNBQUNDLEdBQ3pCQSxFQUFJOEIsaUJBQ0YsU0FDQSx1QkRoSkssZUNpSkg5QixTQUE4QyxRQUEzQyxFQUFIQSxFQUFLK0IsYUFBYXpDLFVBQTRCLFdBQTNDLEVBQUgsRUFBZ0QwQyxnQkFDcEIsRUFBS0csZUFBZS9CLEVBQVEsR0FFOUQsR0FDRixNLG9FQUFDLEVBaEtPLEdDR0UsSUFBSTNELEVBQVcsSUFBSTJGLEVBQVMsSUFBSUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2dhbWUtdGFzay8uL3NyYy9jb250cm9sbGVycy9jb250cm9sbGVyLmpzIiwid2VicGFjazovL2dhbWUtdGFzay8uL3NyYy91dGlscy9hcnJheVN1ZmZsZS5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvbW9kZWxzL21vZGVsLmpzIiwid2VicGFjazovL2dhbWUtdGFzay8uL3NyYy91dGlscy9nZXRVbmlxdWVDb21wYXJlUmVzdWx0LmpzIiwid2VicGFjazovL2dhbWUtdGFzay8uL3NyYy9kYXRhL2NvbnN0YW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvdmlld3Mvdmlldy5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldykge1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbFxuICAgIHRoaXMudmlldyA9IHZpZXdcblxuICAgIHRoaXMudmlldy5iaW5kVG9nZ2xlU3RhcnRTdG9wKHRoaXMuaGFuZGxlVG9nZ2xlU3RhcnRTdG9wKVxuICAgIHRoaXMudmlldy5iaW5kQWRkKHRoaXMuaGFuZGxlQWRkKVxuICAgIHRoaXMudmlldy5iaW5kUmVtb3ZlKHRoaXMuaGFuZGxlUmVtb3ZlKVxuICB9XG5cbiAgaGFuZGxlVG9nZ2xlU3RhcnRTdG9wID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5tb2RlbC5zdG9wR2FtZSgpXG4gICAgcmV0dXJuIHsgc3RhdGUgfVxuICB9XG5cbiAgaGFuZGxlQWRkID0gKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1vZGVsLmFkZEl0ZW0oKVxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5tb2RlbC5zdGF0ZVxuICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4gdGhpcy5tb2RlbC51cGRhdGVPbk1vdmVVcChpdGVtKVxuICAgIHJldHVybiB7IGl0ZW0sIHN0YXRlLCBjYWxsYmFjayB9XG4gIH1cblxuICBoYW5kbGVSZW1vdmUgPSAoKSA9PiB7XG4gICAgY29uc3QgaXRlbSA9IHRoaXMubW9kZWwucmVtb3ZlSXRlbSgpXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLm1vZGVsLnN0YXRlXG5cbiAgICByZXR1cm4geyBpdGVtLCBzdGF0ZSB9XG4gIH1cblxuICBoYW5kbGVVcGRhdGVDb3VudGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50ZXIgPSB0aGlzLm1vZGVsLnVwZGF0ZUNvdW50ZXIoKVxuICAgIHJldHVybiB7IGNvdW50ZXIgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbnRyb2xsZXJcbiIsImV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKGFycmF5KSB7XG4gIGxldCBjdXJyZW50SW5kZXggPSBhcnJheS5sZW5ndGgsXG4gICAgcmFuZG9tSW5kZXhcblxuICAvLyBXaGlsZSB0aGVyZSByZW1haW4gZWxlbWVudHMgdG8gc2h1ZmZsZS5cbiAgd2hpbGUgKGN1cnJlbnRJbmRleCAhPSAwKSB7XG4gICAgLy8gUGljayBhIHJlbWFpbmluZyBlbGVtZW50LlxuICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KVxuICAgIGN1cnJlbnRJbmRleC0tXG5cbiAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgO1thcnJheVtjdXJyZW50SW5kZXhdLCBhcnJheVtyYW5kb21JbmRleF1dID0gW1xuICAgICAgYXJyYXlbcmFuZG9tSW5kZXhdLFxuICAgICAgYXJyYXlbY3VycmVudEluZGV4XSxcbiAgICBdXG4gIH1cblxuICByZXR1cm4gYXJyYXlcbn1cbiIsImltcG9ydCBTSEFQRVMgZnJvbSAnLi4vZGF0YS9zaGFwZXMuanNvbidcbmltcG9ydCB7IGdldFVuaXF1ZUNvbXBhcmVSZXN1bHQsIHNodWZmbGUgfSBmcm9tICcuLi91dGlscydcblxuY2xhc3MgTW9kZWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZGF0YTogU0hBUEVTLFxuICAgICAgaW5pdGlhbERhdGE6IFtdLFxuICAgICAgY291bnRlcjogMCxcbiAgICAgIGZhdkNvbG9yczogWydibHVlJywgJ2dyZWVuJywgJ3llbGxvdycsICdwdXJwbGUnLCAnb3JhbmdlJywgJ3JlZCddLFxuICAgICAgc2l6ZTogWydzbWFsbCcsICdtZWRpdW0nLCAnbGFyZ2UnXSxcbiAgICB9XG4gIH1cblxuICBfdXBkYXRlQ291bnRlcigpIHtcbiAgICByZXR1cm4gKHRoaXMuc3RhdGUuY291bnRlciA9IHRoaXMuc3RhdGUuaW5pdGlhbERhdGEubGVuZ3RoKVxuICB9XG5cbiAgYWRkSXRlbSgpIHtcbiAgICBjb25zdCBpdGVtVG9BZGQgPSBnZXRVbmlxdWVDb21wYXJlUmVzdWx0KFxuICAgICAgdGhpcy5zdGF0ZS5kYXRhLFxuICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YVxuICAgIClcblxuICAgIGxldCBuZXdJdGVtID0gc2h1ZmZsZShpdGVtVG9BZGQpLnBvcCgpXG5cbiAgICBsZXQgZmF2ID0gWy4uLnNodWZmbGUodGhpcy5zdGF0ZS5mYXZDb2xvcnMpXVxuICAgIGxldCBzaXplID0gWy4uLnNodWZmbGUodGhpcy5zdGF0ZS5zaXplKV1cblxuICAgIG5ld0l0ZW0uZmlndXJlID0gYCR7bmV3SXRlbS5maWd1cmV9ICR7c2h1ZmZsZShmYXYpLnBvcCgpfSAke3NodWZmbGUoXG4gICAgICBzaXplXG4gICAgKS5wb3AoKX1gXG5cbiAgICB0aGlzLnN0YXRlLmluaXRpYWxEYXRhID0gWy4uLnRoaXMuc3RhdGUuaW5pdGlhbERhdGEsIG5ld0l0ZW1dXG4gICAgdGhpcy5fdXBkYXRlQ291bnRlcigpXG5cbiAgICByZXR1cm4gbmV3SXRlbVxuICB9XG5cbiAgcmVtb3ZlSXRlbSgpIHtcbiAgICBjb25zdCBwb3BEYXRhID0gdGhpcy5zdGF0ZS5pbml0aWFsRGF0YS5wb3AoKVxuXG4gICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YSA9IHRoaXMuc3RhdGUuaW5pdGlhbERhdGE/LmZpbHRlcihcbiAgICAgIChkYXRhKSA9PiBkYXRhLmlkICE9PSBwb3BEYXRhPy5pZFxuICAgIClcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKClcblxuICAgIHJldHVybiBwb3BEYXRhXG4gIH1cblxuICBzdG9wR2FtZSgpIHtcbiAgICB0aGlzLnN0YXRlLmNvdW50ZXIgPSAwXG4gICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YSA9IFtdXG4gICAgcmV0dXJuIHRoaXMuc3RhdGVcbiAgfVxuXG4gIHVwZGF0ZU9uTW92ZVVwKGl0ZW0pIHtcbiAgICB0aGlzLnN0YXRlLmluaXRpYWxEYXRhID0gdGhpcy5zdGF0ZS5pbml0aWFsRGF0YT8uZmlsdGVyKFxuICAgICAgKGRhdGEpID0+IGRhdGEuaWQgIT09IGl0ZW0/LmlkXG4gICAgKVxuICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIoKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVsXG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0VW5pcXVlQ29tcGFyZVJlc3VsdChhcnIxLCBhcnIyKSB7XG4gIGNvbnN0IGZpbmFsQXJyYXkgPSBhcnIxLmZpbHRlcihcbiAgICAob25lKSA9PiAhYXJyMi5maW5kKCh0d28pID0+IG9uZS5pZCA9PT0gdHdvLmlkKVxuICApXG4gIHJldHVybiBmaW5hbEFycmF5XG59XG4iLCJleHBvcnQgY29uc3QgVUlfQ09OU1RBTlRTID0ge1xuICBhcHA6ICdhcHAnLFxuICBnYW1lQm94OiAnZGF0YS1nYW1lLWJveCcsXG4gIGdhbWVTY3JlZW5Ib2xkZXI6ICdkYXRhLWdhbWUtc2NyZWVuLWhvbGRlcicsXG4gIGdhbWVDb250cm9sbGVyQnRuOiAnZGF0YS1nYW1lLWNvbnRyb2xsZXItYnRuJyxcbiAgZ2FtZUNvdW50ZXJCdG46ICdkYXRhLWdhbWUtY291bnRlci1idG4nLFxuICBnYW1lQ291bnRlckRpc3BsYXk6ICdkYXRhLWdhbWUtY291bnRlci1kaXNwbGF5JyxcblxuICBjb250cm9sbGVyQnRuQXR0cjogJ2RhdGEtZ2FtZS1jb250cm9sbGVyLWJ0bicsXG4gIGNvdW50ZXJCdG5BdHRyOiAnZGF0YS1nYW1lLWNvdW50ZXItYnRuJyxcbiAgZGlzYWJsZWRDbGFzczogJ2Rpc2FibGVkJyxcbiAgU1RBUlQ6ICdTVEFSVCcsXG4gIElOQ1JFTUVOVDogJ0lOQ1JFTUVOVCcsXG4gIERFQ1JFTUVOVDogJ0RFQ1JFTUVOVCcsXG4gIEFERDogJ0FERCcsXG4gIFJFTU9WRTogJ1JFTU9WRScsXG59XG4iLCJpbXBvcnQgeyBVSV9DT05TVEFOVFMgfSBmcm9tICcuLi9kYXRhL2NvbnN0YW50cydcblxuY2xhc3MgVmlldyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2FtZUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFske1VJX0NPTlNUQU5UUy5nYW1lQm94fV1gKVxuICAgIHRoaXMuZ2FtZUJveFNjcmVlbkhvbGRlciA9IHRoaXMuZ2FtZUJveD8ucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbJHtVSV9DT05TVEFOVFMuZ2FtZVNjcmVlbkhvbGRlcn1dYFxuICAgIClcbiAgICB0aGlzLnBsYXlCdG5zID0gdGhpcy5nYW1lQm94Py5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgYFske1VJX0NPTlNUQU5UUy5nYW1lQ29udHJvbGxlckJ0bn1dYFxuICAgIClcbiAgICB0aGlzLmNvdW50ZXJCdG5zID0gdGhpcy5nYW1lQm94Py5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgYFske1VJX0NPTlNUQU5UUy5nYW1lQ291bnRlckJ0bn1dYFxuICAgIClcbiAgICB0aGlzLmNvdW50ZXJEaXNwbGF5ID0gdGhpcy5nYW1lQm94Py5xdWVyeVNlbGVjdG9yKFxuICAgICAgYFske1VJX0NPTlNUQU5UUy5nYW1lQ291bnRlckRpc3BsYXl9XWBcbiAgICApXG4gIH1cblxuICBfZGlzYWJsZUNvdW50ZXIoKSB7XG4gICAgdGhpcy5jb3VudGVyQnRucz8uZm9yRWFjaCgoYnRuKSA9PlxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoVUlfQ09OU1RBTlRTLmRpc2FibGVkQ2xhc3MpXG4gICAgKVxuICB9XG5cbiAgX2VuYWJsZUNvdW50ZXIoKSB7XG4gICAgdGhpcy5jb3VudGVyQnRucz8uZm9yRWFjaCgoYnRuKSA9PlxuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoVUlfQ09OU1RBTlRTLmRpc2FibGVkQ2xhc3MpXG4gICAgKVxuICB9XG5cbiAgX2l0ZW1JbmNyZW1lbnQoaGFuZGxlcikge1xuICAgIGNvbnN0IHsgaXRlbSwgc3RhdGUsIGNhbGxiYWNrIH0gPSBoYW5kbGVyKClcblxuICAgIGlmIChzdGF0ZS5jb3VudGVyIDwgc3RhdGUuZGF0YS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2FkZEl0ZW0oaXRlbSwgc3RhdGUsIGNhbGxiYWNrKVxuICAgICAgdGhpcy5fdXBkYXRlQ291bnRlcihzdGF0ZSlcbiAgICB9XG4gIH1cblxuICBfaXRlbURlY3JlbWVudChoYW5kbGVyKSB7XG4gICAgY29uc3QgeyBpdGVtLCBzdGF0ZSB9ID0gaGFuZGxlcigpXG5cbiAgICBpZiAoaXRlbSkge1xuICAgICAgdGhpcy5fcmVtb3ZlSXRlbShpdGVtLCBzdGF0ZSlcbiAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIoc3RhdGUpXG4gICAgfVxuICB9XG5cbiAgX2FkZEl0ZW0oaXRlbSwgc3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fbW92ZVNoYXBlVmlldyhpdGVtLCB0aGlzLl9jcmVhdGVJbWFnZVZpZXcoaXRlbSksIHN0YXRlLCBjYWxsYmFjaylcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICB9XG5cbiAgX3JlbW92ZUl0ZW0oaXRlbSwgc3RhdGUpIHtcbiAgICB0aGlzLl9pdGVtUmVtb3ZlRnJvbURvbVZpZXcoaXRlbS5pZClcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICB9XG5cbiAgX2l0ZW1SZW1vdmVGcm9tRG9tVmlldyhpZCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKT8ucmVtb3ZlKClcbiAgfVxuXG4gIF9tb3ZlU2hhcGVWaWV3KGl0ZW0sIHNoYXBlLCBzdGF0ZSwgY2FsbGJhY2spIHtcbiAgICBsZXQgcG9zaXRpb24gPSAwXG5cbiAgICBjb25zdCBmcmFtZSA9ICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgcG9zaXRpb24gPT09XG4gICAgICAgIHRoaXMuZ2FtZUJveFNjcmVlbkhvbGRlcj8uY2xpZW50SGVpZ2h0IC0gc2hhcGUub2Zmc2V0SGVpZ2h0XG4gICAgICApIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpZClcbiAgICAgICAgc2hhcGUucmVtb3ZlKClcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zaXRpb24rK1xuICAgICAgICBzaGFwZS5zdHlsZS5ib3R0b20gPSBwb3NpdGlvbiArICdweCdcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGlkID0gc2V0SW50ZXJ2YWwoZnJhbWUsIDE1KVxuICB9XG5cbiAgX2NyZWF0ZUltYWdlVmlldyhpdGVtKSB7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBpdGVtLmZpZ3VyZVxuICAgICAgY29uc3QgdHlwZUFyciA9IHR5cGU/LnNwbGl0KCcgJylcbiAgICAgIGNvbnN0IHJhbmRvbVZhbCA9IChtaW4sIG1heCkgPT5cbiAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pblxuXG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgaWYgKHR5cGVBcnIpIHtcbiAgICAgICAgdHlwZUFycj8ubGVuZ3RoID4gMSAmJiB0eXBlQXJyPy5sZW5ndGggPCAzXG4gICAgICAgICAgPyBkaXYuY2xhc3NMaXN0LmFkZCgnZmlndXJlJywgYGZpZ3VyZS0ke3R5cGVBcnJbMF19YCwgYCR7dHlwZUFyclsxXX1gKVxuICAgICAgICAgIDogdHlwZUFycj8ubGVuZ3RoID4gMlxuICAgICAgICAgID8gZGl2LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgICAgICAgICdmaWd1cmUnLFxuICAgICAgICAgICAgICBgZmlndXJlLSR7dHlwZUFyclswXX1gLFxuICAgICAgICAgICAgICBgJHt0eXBlQXJyWzFdfWAsXG4gICAgICAgICAgICAgIGAke3R5cGVBcnJbMl19YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogZGl2LmNsYXNzTGlzdC5hZGQoJ2ZpZ3VyZScsIGBmaWd1cmUtJHt0eXBlQXJyWzBdfWApXG4gICAgICB9XG4gICAgICBkaXYuc2V0QXR0cmlidXRlKCdpZCcsIGl0ZW0uaWQpXG4gICAgICBkaXYuc3R5bGUubGVmdCA9IGAke3JhbmRvbVZhbCgwLCA4MCl9JWBcbiAgICAgIHRoaXMuZ2FtZUJveFNjcmVlbkhvbGRlcj8uYXBwZW5kQ2hpbGQoZGl2KVxuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpdGVtLmlkfWApPy5jbGFzc0xpc3QuYWRkKCdvdXQnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PlxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpdGVtLmlkfWApPy5jbGFzc0xpc3QuYWRkKCdpbicpXG4gICAgICApXG5cbiAgICAgIHJldHVybiBkaXZcbiAgICB9XG4gIH1cblxuICBfdXBkYXRlQ291bnRlcihzdGF0ZSkge1xuICAgIGlmICh0aGlzLmNvdW50ZXJEaXNwbGF5KSB7XG4gICAgICB0aGlzLmNvdW50ZXJEaXNwbGF5LmlubmVySFRNTCA9IGBDb3VudHM6ICR7c3RhdGUuY291bnRlcn1gXG4gICAgfVxuICB9XG5cbiAgYmluZFRvZ2dsZVN0YXJ0U3RvcChoYW5kbGVyKSB7XG4gICAgdGhpcy5fZGlzYWJsZUNvdW50ZXIoKVxuXG4gICAgdGhpcy5wbGF5QnRucz8uZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBidG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYnRuPy5nZXRBdHRyaWJ1dGUoVUlfQ09OU1RBTlRTLmNvbnRyb2xsZXJCdG5BdHRyKT8udG9VcHBlckNhc2UoKSA9PT1cbiAgICAgICAgICBVSV9DT05TVEFOVFMuU1RBUlRcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fZW5hYmxlQ291bnRlcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5nYW1lQm94U2NyZWVuSG9sZGVyLmlubmVySFRNTCA9ICcnXG4gICAgICAgICAgdGhpcy5fZGlzYWJsZUNvdW50ZXIoKVxuICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IGhhbmRsZXIoKVxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIoc3RhdGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGJpbmRBZGQoaGFuZGxlcikge1xuICAgIHRoaXMuY291bnRlckJ0bnM/LmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdjbGljaycsXG4gICAgICAgICgpID0+XG4gICAgICAgICAgYnRuPy5nZXRBdHRyaWJ1dGUoVUlfQ09OU1RBTlRTLmNvdW50ZXJCdG5BdHRyKT8udG9VcHBlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIFVJX0NPTlNUQU5UUy5JTkNSRU1FTlQgJiYgdGhpcy5faXRlbUluY3JlbWVudChoYW5kbGVyKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBiaW5kUmVtb3ZlKGhhbmRsZXIpIHtcbiAgICB0aGlzLmNvdW50ZXJCdG5zPy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnY2xpY2snLFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIGJ0bj8uZ2V0QXR0cmlidXRlKFVJX0NPTlNUQU5UUy5jb3VudGVyQnRuQXR0cik/LnRvVXBwZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBVSV9DT05TVEFOVFMuREVDUkVNRU5UICYmIHRoaXMuX2l0ZW1EZWNyZW1lbnQoaGFuZGxlcilcbiAgICAgIClcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXdcbiIsImltcG9ydCAnLi9hc3NldHMvc3R5bGVzL21haW4uc2NzcydcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcnMvY29udHJvbGxlcidcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVscy9tb2RlbCdcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlld3MvdmlldydcblxuY29uc3QgYXBwID0gbmV3IENvbnRyb2xsZXIobmV3IE1vZGVsKCksIG5ldyBWaWV3KCkpXG4iXSwibmFtZXMiOlsiQ29udHJvbGxlciIsIm1vZGVsIiwidmlldyIsInN0YXRlIiwic3RvcEdhbWUiLCJpdGVtIiwiYWRkSXRlbSIsImNhbGxiYWNrIiwidXBkYXRlT25Nb3ZlVXAiLCJyZW1vdmVJdGVtIiwiY291bnRlciIsInVwZGF0ZUNvdW50ZXIiLCJ0aGlzIiwiYmluZFRvZ2dsZVN0YXJ0U3RvcCIsImhhbmRsZVRvZ2dsZVN0YXJ0U3RvcCIsImJpbmRBZGQiLCJoYW5kbGVBZGQiLCJiaW5kUmVtb3ZlIiwiaGFuZGxlUmVtb3ZlIiwic2h1ZmZsZSIsImFycmF5IiwicmFuZG9tSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJsZW5ndGgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJkYXRhIiwiU0hBUEVTIiwiaW5pdGlhbERhdGEiLCJmYXZDb2xvcnMiLCJzaXplIiwiYXJyMSIsImFycjIiLCJuZXdJdGVtIiwiZmlsdGVyIiwib25lIiwiZmluZCIsInR3byIsImlkIiwicG9wIiwiZmF2IiwiZmlndXJlIiwiX3VwZGF0ZUNvdW50ZXIiLCJwb3BEYXRhIiwiVUlfQ09OU1RBTlRTIiwiZ2FtZUJveCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdhbWVCb3hTY3JlZW5Ib2xkZXIiLCJwbGF5QnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudGVyQnRucyIsImNvdW50ZXJEaXNwbGF5IiwiZm9yRWFjaCIsImJ0biIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImhhbmRsZXIiLCJfYWRkSXRlbSIsIl9yZW1vdmVJdGVtIiwiX21vdmVTaGFwZVZpZXciLCJfY3JlYXRlSW1hZ2VWaWV3IiwiX2l0ZW1SZW1vdmVGcm9tRG9tVmlldyIsImdldEVsZW1lbnRCeUlkIiwic2hhcGUiLCJwb3NpdGlvbiIsInNldEludGVydmFsIiwiY2xpZW50SGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiY2xlYXJJbnRlcnZhbCIsInN0eWxlIiwiYm90dG9tIiwidHlwZSIsInR5cGVBcnIiLCJzcGxpdCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsZWZ0IiwiYXBwZW5kQ2hpbGQiLCJzZXRUaW1lb3V0IiwiaW5uZXJIVE1MIiwiX2Rpc2FibGVDb3VudGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldEF0dHJpYnV0ZSIsInRvVXBwZXJDYXNlIiwiX2VuYWJsZUNvdW50ZXIiLCJfaXRlbUluY3JlbWVudCIsIl9pdGVtRGVjcmVtZW50IiwiTW9kZWwiLCJWaWV3Il0sInNvdXJjZVJvb3QiOiIifQ==