!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=t((function e(t,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"handleToggleStartStop",(function(){return{state:a.model.stopGame()}})),n(this,"handleAdd",(function(){var e=a.model.addItem(),t=a.model.state;return{item:e,state:t,callback:function(){return a.model.updateOnMoveUp(e)}}})),n(this,"handleRemove",(function(){return{item:a.model.removeItem(),state:a.model.state}})),n(this,"handleUpdateCounter",(function(){return{counter:a.model.updateCounter()}})),this.model=t,this.view=i,this.view.bindToggleStartStop(this.handleToggleStartStop),this.view.bindAdd(this.handleAdd),this.view.bindRemove(this.handleRemove)})),a=i,r=JSON.parse('[{"id":"101","figure":"circle"},{"id":"102","figure":"rectangle"},{"id":"103","figure":"square"},{"id":"104","figure":"triangle"},{"id":"105","figure":"star"},{"id":"106","figure":"trapezoid"},{"id":"107","figure":"rhombus"},{"id":"108","figure":"pentagon"},{"id":"109","figure":"hexagon"},{"id":"110","figure":"ellipse"},{"id":"111","figure":"chat"},{"id":"112","figure":"close"},{"id":"113","figure":"frame"},{"id":"114","figure":"cross"}]');function o(e){for(var t,n=e.length;0!=n;){t=Math.floor(Math.random()*n),n--;var i=[e[t],e[n]];e[n]=i[0],e[t]=i[1]}return e}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={data:r,initialData:[],counter:0,favColors:["blue","green","yellow","purple","orange","red"],size:["small","medium","large"]}}var t,n;return t=e,(n=[{key:"addItem",value:function(){var e,t,n=o((e=this.state.data,t=this.state.initialData,e.filter((function(e){return!t.find((function(t){return e.id===t.id}))})))).pop(),i=u(o(this.state.favColors)),a=u(o(this.state.size));return n.figure="".concat(n.figure," ").concat(o(i).pop()," ").concat(o(a).pop()),this.state.initialData=[].concat(u(this.state.initialData),[n]),this._updateCounter(),n}},{key:"removeItem",value:function(){var e,t=this.state.initialData.pop();return this.state.initialData=null===(e=this.state.initialData)||void 0===e?void 0:e.filter((function(e){return e.id!==(null==t?void 0:t.id)})),this._updateCounter(),t}},{key:"stopGame",value:function(){return this.state.counter=0,this.state.initialData=[],this.state}},{key:"_updateCounter",value:function(){return this.state.counter=this.state.initialData.length}},{key:"updateOnMoveUp",value:function(e){var t;this.state.initialData=null===(t=this.state.initialData)||void 0===t?void 0:t.filter((function(t){return t.id!==(null==e?void 0:e.id)})),this._updateCounter()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d="data-game-counter-btn",f="disabled";function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(){var t,n,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameBox=document.querySelector("[".concat("data-game-box","]")),this.gameBoxScreenHolder=null===(t=this.gameBox)||void 0===t?void 0:t.querySelector("[".concat("data-game-screen-holder","]")),this.playBtns=null===(n=this.gameBox)||void 0===n?void 0:n.querySelectorAll("[".concat("data-game-controller-btn","]")),this.counterBtns=null===(i=this.gameBox)||void 0===i?void 0:i.querySelectorAll("[".concat("data-game-counter-btn","]")),this.counterDisplay=null===(a=this.gameBox)||void 0===a?void 0:a.querySelector("[".concat("data-game-counter-display","]"))}var t,n;return t=e,(n=[{key:"_disableCounter",value:function(){var e;null===(e=this.counterBtns)||void 0===e||e.forEach((function(e){return e.classList.add(f)}))}},{key:"_enableCounter",value:function(){var e;null===(e=this.counterBtns)||void 0===e||e.forEach((function(e){return e.classList.remove(f)}))}},{key:"_itemIncrement",value:function(e){var t=e(),n=t.item,i=t.state,a=t.callback;i.counter<i.data.length&&(this._addItem(n,i,a),this._updateCounter(i))}},{key:"_itemDecrement",value:function(e){var t=e(),n=t.item,i=t.state;n&&(this._removeItem(n,i),this._updateCounter(i))}},{key:"_addItem",value:function(e,t,n){this._moveShapeView(e,this._createImageView(e),t,n),this._updateCounter(t)}},{key:"_removeItem",value:function(e,t){console.log(e),this._itemRemoveFromDomView(e.id),this._updateCounter(t)}},{key:"_itemRemoveFromDomView",value:function(e){var t;null===(t=document.getElementById(e))||void 0===t||t.remove()}},{key:"_moveShapeView",value:function(e,t,n,i){var a=this,r=0,o=setInterval((function(){var e;r===(null===(e=a.gameBoxScreenHolder)||void 0===e?void 0:e.clientHeight)-t.offsetHeight?(clearInterval(o),t.remove(),i(),a._updateCounter(n)):(r++,t.style.bottom=r+"px")}),15)}},{key:"_createImageView",value:function(e){if(e){var t,n,i=e.figure,a=null==i?void 0:i.split(" "),r=document.createElement("div");return a&&((null==a?void 0:a.length)>1&&(null==a?void 0:a.length)<3?r.classList.add("figure","figure-".concat(a[0]),"".concat(a[1])):(null==a?void 0:a.length)>2?r.classList.add("figure","figure-".concat(a[0]),"".concat(a[1]),"".concat(a[2])):r.classList.add("figure","figure-".concat(a[0]))),r.setAttribute("id",e.id),r.style.left="".concat((0,80,Math.floor(81*Math.random())+0),"%"),null===(t=this.gameBoxScreenHolder)||void 0===t||t.appendChild(r),null===(n=document.getElementById("".concat(e.id)))||void 0===n||n.classList.add("out"),setTimeout((function(){var t;return null===(t=document.getElementById("".concat(e.id)))||void 0===t?void 0:t.classList.add("in")})),r}}},{key:"_updateCounter",value:function(e){this.counterDisplay&&(this.counterDisplay.innerHTML="Counts: ".concat(e.counter))}},{key:"bindToggleStartStop",value:function(e){var t,n=this;this._disableCounter(),null===(t=this.playBtns)||void 0===t||t.forEach((function(t){null==t||t.addEventListener("click",(function(){var i;if("START"===(null==t||null===(i=t.getAttribute("data-game-controller-btn"))||void 0===i?void 0:i.toUpperCase()))n._enableCounter();else{n.gameBoxScreenHolder.innerHTML="",n._disableCounter();var a=e().state;n._updateCounter(a)}}))}))}},{key:"bindAdd",value:function(e){var t,n=this;null===(t=this.counterBtns)||void 0===t||t.forEach((function(t){t.addEventListener("click",(function(){var i;return"INCREMENT"===(null==t||null===(i=t.getAttribute(d))||void 0===i?void 0:i.toUpperCase())&&n._itemIncrement(e)}))}))}},{key:"bindRemove",value:function(e){var t,n=this;null===(t=this.counterBtns)||void 0===t||t.forEach((function(t){t.addEventListener("click",(function(){var i;return"DECREMENT"===(null==t||null===(i=t.getAttribute(d))||void 0===i?void 0:i.toUpperCase())&&n._itemDecrement(e)}))}))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();new a(new s,new h)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUR6SE0sbUNDeUhzQyxXQUE5QyxFQUFILEVBQW1EQyxlQUduRCxFQUFLQyxxQkFDQSxDQUNMLEVBQUt6QyxvQkFBb0JvQyxVQUFZLEdBQ3JDLEVBQUtDLGtCQUNMLElBQVFuRixFQUFVd0QsSUFBVnhELE1BQ1IsRUFBS3dDLGVBQWV4QyxFQUN0QixDQUNGLEdBQ0YsR0FDRixHQUFDLHFCQUVELFNBQVF3RCxHQUFTLGFBQ0MsUUFBaEIsRUFBQS9DLEtBQUt3QyxtQkFBVyxPQUFoQixFQUFrQkUsU0FBUSxTQUFDQyxHQUN6QkEsRUFBSWdDLGlCQUNGLFNBQ0EsdUJEdklLLGVDd0lIaEMsU0FBOEMsUUFBM0MsRUFBSEEsRUFBS2lDLGFBQWEzQyxVQUE0QixXQUEzQyxFQUFILEVBQWdENEMsZ0JBQ3BCLEVBQUtFLGVBQWVoQyxFQUFRLEdBRTlELEdBQ0YsR0FBQyx3QkFFRCxTQUFXQSxHQUFTLGFBQ0YsUUFBaEIsRUFBQS9DLEtBQUt3QyxtQkFBVyxPQUFoQixFQUFrQkUsU0FBUSxTQUFDQyxHQUN6QkEsRUFBSWdDLGlCQUNGLFNBQ0EsdUJEakpLLGVDa0pIaEMsU0FBOEMsUUFBM0MsRUFBSEEsRUFBS2lDLGFBQWEzQyxVQUE0QixXQUEzQyxFQUFILEVBQWdENEMsZ0JBQ3BCLEVBQUtHLGVBQWVqQyxFQUFRLEdBRTlELEdBQ0YsTSxvRUFBQyxFQWpLTyxHQ0dFLElBQUkzRCxFQUFXLElBQUk2RixFQUFTLElBQUlDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvY29udHJvbGxlcnMvY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvdXRpbHMvYXJyYXlTdWZmbGUuanMiLCJ3ZWJwYWNrOi8vZ2FtZS10YXNrLy4vc3JjL21vZGVscy9tb2RlbC5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvdXRpbHMvZ2V0VW5pcXVlQ29tcGFyZVJlc3VsdC5qcyIsIndlYnBhY2s6Ly9nYW1lLXRhc2svLi9zcmMvZGF0YS9jb25zdGFudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ2FtZS10YXNrLy4vc3JjL3ZpZXdzL3ZpZXcuanMiLCJ3ZWJwYWNrOi8vZ2FtZS10YXNrLy4vc3JjL2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcpIHtcbiAgICB0aGlzLm1vZGVsID0gbW9kZWxcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG5cbiAgICB0aGlzLnZpZXcuYmluZFRvZ2dsZVN0YXJ0U3RvcCh0aGlzLmhhbmRsZVRvZ2dsZVN0YXJ0U3RvcClcbiAgICB0aGlzLnZpZXcuYmluZEFkZCh0aGlzLmhhbmRsZUFkZClcbiAgICB0aGlzLnZpZXcuYmluZFJlbW92ZSh0aGlzLmhhbmRsZVJlbW92ZSlcbiAgfVxuXG4gIGhhbmRsZVRvZ2dsZVN0YXJ0U3RvcCA9ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMubW9kZWwuc3RvcEdhbWUoKVxuICAgIHJldHVybiB7IHN0YXRlIH1cbiAgfVxuXG4gIGhhbmRsZUFkZCA9ICgpID0+IHtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5tb2RlbC5hZGRJdGVtKClcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMubW9kZWwuc3RhdGVcbiAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHRoaXMubW9kZWwudXBkYXRlT25Nb3ZlVXAoaXRlbSlcbiAgICByZXR1cm4geyBpdGVtLCBzdGF0ZSwgY2FsbGJhY2sgfVxuICB9XG5cbiAgaGFuZGxlUmVtb3ZlID0gKCkgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1vZGVsLnJlbW92ZUl0ZW0oKVxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5tb2RlbC5zdGF0ZVxuXG4gICAgcmV0dXJuIHsgaXRlbSwgc3RhdGUgfVxuICB9XG5cbiAgaGFuZGxlVXBkYXRlQ291bnRlciA9ICgpID0+IHtcbiAgICBjb25zdCBjb3VudGVyID0gdGhpcy5tb2RlbC51cGRhdGVDb3VudGVyKClcbiAgICByZXR1cm4geyBjb3VudGVyIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250cm9sbGVyXG4iLCJleHBvcnQgZnVuY3Rpb24gc2h1ZmZsZShhcnJheSkge1xuICBsZXQgY3VycmVudEluZGV4ID0gYXJyYXkubGVuZ3RoLFxuICAgIHJhbmRvbUluZGV4XG5cbiAgLy8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuXG4gIHdoaWxlIChjdXJyZW50SW5kZXggIT0gMCkge1xuICAgIC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC5cbiAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleClcbiAgICBjdXJyZW50SW5kZXgtLVxuXG4gICAgLy8gQW5kIHN3YXAgaXQgd2l0aCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgIDtbYXJyYXlbY3VycmVudEluZGV4XSwgYXJyYXlbcmFuZG9tSW5kZXhdXSA9IFtcbiAgICAgIGFycmF5W3JhbmRvbUluZGV4XSxcbiAgICAgIGFycmF5W2N1cnJlbnRJbmRleF0sXG4gICAgXVxuICB9XG5cbiAgcmV0dXJuIGFycmF5XG59XG4iLCJpbXBvcnQgU0hBUEVTIGZyb20gJy4uL2RhdGEvc2hhcGVzLmpzb24nXG5pbXBvcnQgeyBnZXRVbmlxdWVDb21wYXJlUmVzdWx0LCBzaHVmZmxlIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmNsYXNzIE1vZGVsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGE6IFNIQVBFUyxcbiAgICAgIGluaXRpYWxEYXRhOiBbXSxcbiAgICAgIGNvdW50ZXI6IDAsXG4gICAgICBmYXZDb2xvcnM6IFsnYmx1ZScsICdncmVlbicsICd5ZWxsb3cnLCAncHVycGxlJywgJ29yYW5nZScsICdyZWQnXSxcbiAgICAgIHNpemU6IFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJ10sXG4gICAgfVxuICB9XG5cbiAgYWRkSXRlbSgpIHtcbiAgICBjb25zdCBpdGVtVG9BZGQgPSBnZXRVbmlxdWVDb21wYXJlUmVzdWx0KFxuICAgICAgdGhpcy5zdGF0ZS5kYXRhLFxuICAgICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YVxuICAgIClcblxuICAgIGxldCBuZXdJdGVtID0gc2h1ZmZsZShpdGVtVG9BZGQpLnBvcCgpXG5cbiAgICBsZXQgZmF2ID0gWy4uLnNodWZmbGUodGhpcy5zdGF0ZS5mYXZDb2xvcnMpXVxuICAgIGxldCBzaXplID0gWy4uLnNodWZmbGUodGhpcy5zdGF0ZS5zaXplKV1cblxuICAgIG5ld0l0ZW0uZmlndXJlID0gYCR7bmV3SXRlbS5maWd1cmV9ICR7c2h1ZmZsZShmYXYpLnBvcCgpfSAke3NodWZmbGUoXG4gICAgICBzaXplXG4gICAgKS5wb3AoKX1gXG5cbiAgICB0aGlzLnN0YXRlLmluaXRpYWxEYXRhID0gWy4uLnRoaXMuc3RhdGUuaW5pdGlhbERhdGEsIG5ld0l0ZW1dXG4gICAgdGhpcy5fdXBkYXRlQ291bnRlcigpXG5cbiAgICByZXR1cm4gbmV3SXRlbVxuICB9XG5cbiAgcmVtb3ZlSXRlbSgpIHtcbiAgICBjb25zdCBwb3BEYXRhID0gdGhpcy5zdGF0ZS5pbml0aWFsRGF0YS5wb3AoKVxuXG4gICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YSA9IHRoaXMuc3RhdGUuaW5pdGlhbERhdGE/LmZpbHRlcihcbiAgICAgIChkYXRhKSA9PiBkYXRhLmlkICE9PSBwb3BEYXRhPy5pZFxuICAgIClcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKClcblxuICAgIHJldHVybiBwb3BEYXRhXG4gIH1cblxuICBzdG9wR2FtZSgpIHtcbiAgICB0aGlzLnN0YXRlLmNvdW50ZXIgPSAwXG4gICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YSA9IFtdXG4gICAgcmV0dXJuIHRoaXMuc3RhdGVcbiAgfVxuXG4gIF91cGRhdGVDb3VudGVyKCkge1xuICAgIHJldHVybiAodGhpcy5zdGF0ZS5jb3VudGVyID0gdGhpcy5zdGF0ZS5pbml0aWFsRGF0YS5sZW5ndGgpXG4gIH1cblxuICB1cGRhdGVPbk1vdmVVcChpdGVtKSB7XG4gICAgdGhpcy5zdGF0ZS5pbml0aWFsRGF0YSA9IHRoaXMuc3RhdGUuaW5pdGlhbERhdGE/LmZpbHRlcihcbiAgICAgIChkYXRhKSA9PiBkYXRhLmlkICE9PSBpdGVtPy5pZFxuICAgIClcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNb2RlbFxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXF1ZUNvbXBhcmVSZXN1bHQoYXJyMSwgYXJyMikge1xuICBjb25zdCBmaW5hbEFycmF5ID0gYXJyMS5maWx0ZXIoXG4gICAgKG9uZSkgPT4gIWFycjIuZmluZCgodHdvKSA9PiBvbmUuaWQgPT09IHR3by5pZClcbiAgKVxuICByZXR1cm4gZmluYWxBcnJheVxufVxuIiwiZXhwb3J0IGNvbnN0IFVJX0NPTlNUQU5UUyA9IHtcbiAgYXBwOiAnYXBwJyxcbiAgZ2FtZUJveDogJ2RhdGEtZ2FtZS1ib3gnLFxuICBnYW1lU2NyZWVuSG9sZGVyOiAnZGF0YS1nYW1lLXNjcmVlbi1ob2xkZXInLFxuICBnYW1lQ29udHJvbGxlckJ0bjogJ2RhdGEtZ2FtZS1jb250cm9sbGVyLWJ0bicsXG4gIGdhbWVDb3VudGVyQnRuOiAnZGF0YS1nYW1lLWNvdW50ZXItYnRuJyxcbiAgZ2FtZUNvdW50ZXJEaXNwbGF5OiAnZGF0YS1nYW1lLWNvdW50ZXItZGlzcGxheScsXG5cbiAgY29udHJvbGxlckJ0bkF0dHI6ICdkYXRhLWdhbWUtY29udHJvbGxlci1idG4nLFxuICBjb3VudGVyQnRuQXR0cjogJ2RhdGEtZ2FtZS1jb3VudGVyLWJ0bicsXG4gIGRpc2FibGVkQ2xhc3M6ICdkaXNhYmxlZCcsXG4gIFNUQVJUOiAnU1RBUlQnLFxuICBJTkNSRU1FTlQ6ICdJTkNSRU1FTlQnLFxuICBERUNSRU1FTlQ6ICdERUNSRU1FTlQnLFxuICBBREQ6ICdBREQnLFxuICBSRU1PVkU6ICdSRU1PVkUnLFxufVxuIiwiaW1wb3J0IHsgVUlfQ09OU1RBTlRTIH0gZnJvbSAnLi4vZGF0YS9jb25zdGFudHMnXG5cbmNsYXNzIFZpZXcge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdhbWVCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbJHtVSV9DT05TVEFOVFMuZ2FtZUJveH1dYClcbiAgICB0aGlzLmdhbWVCb3hTY3JlZW5Ib2xkZXIgPSB0aGlzLmdhbWVCb3g/LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgWyR7VUlfQ09OU1RBTlRTLmdhbWVTY3JlZW5Ib2xkZXJ9XWBcbiAgICApXG4gICAgdGhpcy5wbGF5QnRucyA9IHRoaXMuZ2FtZUJveD8ucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIGBbJHtVSV9DT05TVEFOVFMuZ2FtZUNvbnRyb2xsZXJCdG59XWBcbiAgICApXG4gICAgdGhpcy5jb3VudGVyQnRucyA9IHRoaXMuZ2FtZUJveD8ucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIGBbJHtVSV9DT05TVEFOVFMuZ2FtZUNvdW50ZXJCdG59XWBcbiAgICApXG4gICAgdGhpcy5jb3VudGVyRGlzcGxheSA9IHRoaXMuZ2FtZUJveD8ucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbJHtVSV9DT05TVEFOVFMuZ2FtZUNvdW50ZXJEaXNwbGF5fV1gXG4gICAgKVxuICB9XG5cbiAgX2Rpc2FibGVDb3VudGVyKCkge1xuICAgIHRoaXMuY291bnRlckJ0bnM/LmZvckVhY2goKGJ0bikgPT5cbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFVJX0NPTlNUQU5UUy5kaXNhYmxlZENsYXNzKVxuICAgIClcbiAgfVxuXG4gIF9lbmFibGVDb3VudGVyKCkge1xuICAgIHRoaXMuY291bnRlckJ0bnM/LmZvckVhY2goKGJ0bikgPT5cbiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFVJX0NPTlNUQU5UUy5kaXNhYmxlZENsYXNzKVxuICAgIClcbiAgfVxuXG4gIF9pdGVtSW5jcmVtZW50KGhhbmRsZXIpIHtcbiAgICBjb25zdCB7IGl0ZW0sIHN0YXRlLCBjYWxsYmFjayB9ID0gaGFuZGxlcigpXG5cbiAgICBpZiAoc3RhdGUuY291bnRlciA8IHN0YXRlLmRhdGEubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9hZGRJdGVtKGl0ZW0sIHN0YXRlLCBjYWxsYmFjaylcbiAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIoc3RhdGUpXG4gICAgfVxuICB9XG5cbiAgX2l0ZW1EZWNyZW1lbnQoaGFuZGxlcikge1xuICAgIGNvbnN0IHsgaXRlbSwgc3RhdGUgfSA9IGhhbmRsZXIoKVxuXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHRoaXMuX3JlbW92ZUl0ZW0oaXRlbSwgc3RhdGUpXG4gICAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICAgIH1cbiAgfVxuXG4gIF9hZGRJdGVtKGl0ZW0sIHN0YXRlLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX21vdmVTaGFwZVZpZXcoaXRlbSwgdGhpcy5fY3JlYXRlSW1hZ2VWaWV3KGl0ZW0pLCBzdGF0ZSwgY2FsbGJhY2spXG4gICAgdGhpcy5fdXBkYXRlQ291bnRlcihzdGF0ZSlcbiAgfVxuXG4gIF9yZW1vdmVJdGVtKGl0ZW0sIHN0YXRlKSB7XG4gICAgY29uc29sZS5sb2coaXRlbSlcbiAgICB0aGlzLl9pdGVtUmVtb3ZlRnJvbURvbVZpZXcoaXRlbS5pZClcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICB9XG5cbiAgX2l0ZW1SZW1vdmVGcm9tRG9tVmlldyhpZCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKT8ucmVtb3ZlKClcbiAgfVxuXG4gIF9tb3ZlU2hhcGVWaWV3KGl0ZW0sIHNoYXBlLCBzdGF0ZSwgY2FsbGJhY2spIHtcbiAgICBsZXQgcG9zaXRpb24gPSAwXG5cbiAgICBjb25zdCBmcmFtZSA9ICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgcG9zaXRpb24gPT09XG4gICAgICAgIHRoaXMuZ2FtZUJveFNjcmVlbkhvbGRlcj8uY2xpZW50SGVpZ2h0IC0gc2hhcGUub2Zmc2V0SGVpZ2h0XG4gICAgICApIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpZClcbiAgICAgICAgc2hhcGUucmVtb3ZlKClcbiAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB0aGlzLl91cGRhdGVDb3VudGVyKHN0YXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zaXRpb24rK1xuICAgICAgICBzaGFwZS5zdHlsZS5ib3R0b20gPSBwb3NpdGlvbiArICdweCdcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGlkID0gc2V0SW50ZXJ2YWwoZnJhbWUsIDE1KVxuICB9XG5cbiAgX2NyZWF0ZUltYWdlVmlldyhpdGVtKSB7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IHR5cGUgPSBpdGVtLmZpZ3VyZVxuICAgICAgY29uc3QgdHlwZUFyciA9IHR5cGU/LnNwbGl0KCcgJylcbiAgICAgIGNvbnN0IHJhbmRvbVZhbCA9IChtaW4sIG1heCkgPT5cbiAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pblxuXG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgaWYgKHR5cGVBcnIpIHtcbiAgICAgICAgdHlwZUFycj8ubGVuZ3RoID4gMSAmJiB0eXBlQXJyPy5sZW5ndGggPCAzXG4gICAgICAgICAgPyBkaXYuY2xhc3NMaXN0LmFkZCgnZmlndXJlJywgYGZpZ3VyZS0ke3R5cGVBcnJbMF19YCwgYCR7dHlwZUFyclsxXX1gKVxuICAgICAgICAgIDogdHlwZUFycj8ubGVuZ3RoID4gMlxuICAgICAgICAgID8gZGl2LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgICAgICAgICdmaWd1cmUnLFxuICAgICAgICAgICAgICBgZmlndXJlLSR7dHlwZUFyclswXX1gLFxuICAgICAgICAgICAgICBgJHt0eXBlQXJyWzFdfWAsXG4gICAgICAgICAgICAgIGAke3R5cGVBcnJbMl19YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogZGl2LmNsYXNzTGlzdC5hZGQoJ2ZpZ3VyZScsIGBmaWd1cmUtJHt0eXBlQXJyWzBdfWApXG4gICAgICB9XG4gICAgICBkaXYuc2V0QXR0cmlidXRlKCdpZCcsIGl0ZW0uaWQpXG4gICAgICBkaXYuc3R5bGUubGVmdCA9IGAke3JhbmRvbVZhbCgwLCA4MCl9JWBcbiAgICAgIHRoaXMuZ2FtZUJveFNjcmVlbkhvbGRlcj8uYXBwZW5kQ2hpbGQoZGl2KVxuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpdGVtLmlkfWApPy5jbGFzc0xpc3QuYWRkKCdvdXQnKVxuICAgICAgc2V0VGltZW91dCgoKSA9PlxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpdGVtLmlkfWApPy5jbGFzc0xpc3QuYWRkKCdpbicpXG4gICAgICApXG5cbiAgICAgIHJldHVybiBkaXZcbiAgICB9XG4gIH1cblxuICBfdXBkYXRlQ291bnRlcihzdGF0ZSkge1xuICAgIGlmICh0aGlzLmNvdW50ZXJEaXNwbGF5KSB7XG4gICAgICB0aGlzLmNvdW50ZXJEaXNwbGF5LmlubmVySFRNTCA9IGBDb3VudHM6ICR7c3RhdGUuY291bnRlcn1gXG4gICAgfVxuICB9XG5cbiAgYmluZFRvZ2dsZVN0YXJ0U3RvcChoYW5kbGVyKSB7XG4gICAgdGhpcy5fZGlzYWJsZUNvdW50ZXIoKVxuXG4gICAgdGhpcy5wbGF5QnRucz8uZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICBidG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYnRuPy5nZXRBdHRyaWJ1dGUoVUlfQ09OU1RBTlRTLmNvbnRyb2xsZXJCdG5BdHRyKT8udG9VcHBlckNhc2UoKSA9PT1cbiAgICAgICAgICBVSV9DT05TVEFOVFMuU1RBUlRcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fZW5hYmxlQ291bnRlcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5nYW1lQm94U2NyZWVuSG9sZGVyLmlubmVySFRNTCA9ICcnXG4gICAgICAgICAgdGhpcy5fZGlzYWJsZUNvdW50ZXIoKVxuICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IGhhbmRsZXIoKVxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvdW50ZXIoc3RhdGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGJpbmRBZGQoaGFuZGxlcikge1xuICAgIHRoaXMuY291bnRlckJ0bnM/LmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICdjbGljaycsXG4gICAgICAgICgpID0+XG4gICAgICAgICAgYnRuPy5nZXRBdHRyaWJ1dGUoVUlfQ09OU1RBTlRTLmNvdW50ZXJCdG5BdHRyKT8udG9VcHBlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIFVJX0NPTlNUQU5UUy5JTkNSRU1FTlQgJiYgdGhpcy5faXRlbUluY3JlbWVudChoYW5kbGVyKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBiaW5kUmVtb3ZlKGhhbmRsZXIpIHtcbiAgICB0aGlzLmNvdW50ZXJCdG5zPy5mb3JFYWNoKChidG4pID0+IHtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnY2xpY2snLFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIGJ0bj8uZ2V0QXR0cmlidXRlKFVJX0NPTlNUQU5UUy5jb3VudGVyQnRuQXR0cik/LnRvVXBwZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBVSV9DT05TVEFOVFMuREVDUkVNRU5UICYmIHRoaXMuX2l0ZW1EZWNyZW1lbnQoaGFuZGxlcilcbiAgICAgIClcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXdcbiIsImltcG9ydCAnLi9hc3NldHMvc3R5bGVzL21haW4uc2NzcydcbmltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcnMvY29udHJvbGxlcidcbmltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVscy9tb2RlbCdcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlld3MvdmlldydcblxuY29uc3QgYXBwID0gbmV3IENvbnRyb2xsZXIobmV3IE1vZGVsKCksIG5ldyBWaWV3KCkpXG4iXSwibmFtZXMiOlsiQ29udHJvbGxlciIsIm1vZGVsIiwidmlldyIsInN0YXRlIiwic3RvcEdhbWUiLCJpdGVtIiwiYWRkSXRlbSIsImNhbGxiYWNrIiwidXBkYXRlT25Nb3ZlVXAiLCJyZW1vdmVJdGVtIiwiY291bnRlciIsInVwZGF0ZUNvdW50ZXIiLCJ0aGlzIiwiYmluZFRvZ2dsZVN0YXJ0U3RvcCIsImhhbmRsZVRvZ2dsZVN0YXJ0U3RvcCIsImJpbmRBZGQiLCJoYW5kbGVBZGQiLCJiaW5kUmVtb3ZlIiwiaGFuZGxlUmVtb3ZlIiwic2h1ZmZsZSIsImFycmF5IiwicmFuZG9tSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJsZW5ndGgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJkYXRhIiwiU0hBUEVTIiwiaW5pdGlhbERhdGEiLCJmYXZDb2xvcnMiLCJzaXplIiwiYXJyMSIsImFycjIiLCJuZXdJdGVtIiwiZmlsdGVyIiwib25lIiwiZmluZCIsInR3byIsImlkIiwicG9wIiwiZmF2IiwiZmlndXJlIiwiX3VwZGF0ZUNvdW50ZXIiLCJwb3BEYXRhIiwiVUlfQ09OU1RBTlRTIiwiZ2FtZUJveCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdhbWVCb3hTY3JlZW5Ib2xkZXIiLCJwbGF5QnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb3VudGVyQnRucyIsImNvdW50ZXJEaXNwbGF5IiwiZm9yRWFjaCIsImJ0biIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImhhbmRsZXIiLCJfYWRkSXRlbSIsIl9yZW1vdmVJdGVtIiwiX21vdmVTaGFwZVZpZXciLCJfY3JlYXRlSW1hZ2VWaWV3IiwiY29uc29sZSIsImxvZyIsIl9pdGVtUmVtb3ZlRnJvbURvbVZpZXciLCJnZXRFbGVtZW50QnlJZCIsInNoYXBlIiwicG9zaXRpb24iLCJzZXRJbnRlcnZhbCIsImNsaWVudEhlaWdodCIsIm9mZnNldEhlaWdodCIsImNsZWFySW50ZXJ2YWwiLCJzdHlsZSIsImJvdHRvbSIsInR5cGUiLCJ0eXBlQXJyIiwic3BsaXQiLCJkaXYiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwibGVmdCIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsImlubmVySFRNTCIsIl9kaXNhYmxlQ291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRBdHRyaWJ1dGUiLCJ0b1VwcGVyQ2FzZSIsIl9lbmFibGVDb3VudGVyIiwiX2l0ZW1JbmNyZW1lbnQiLCJfaXRlbURlY3JlbWVudCIsIk1vZGVsIiwiVmlldyJdLCJzb3VyY2VSb290IjoiIn0=